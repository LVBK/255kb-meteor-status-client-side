(function(){var Meteor=Package.meteor.Meteor;var _=Package.underscore._;var Blaze=Package.blaze.Blaze;var UI=Package.blaze.UI;var Handlebars=Package.blaze.Handlebars;var Spacebars=Package.spacebars.Spacebars;var HTML=Package.htmljs.HTML;var Template;(function(){Template=Blaze.Template;var RESERVED_TEMPLATE_NAMES="__proto__ name".split(" ");Template.__checkName=function(name){if(name in Template||_.contains(RESERVED_TEMPLATE_NAMES,name)){if(Template[name]instanceof Template&&name!=="body")throw new Error("There are multiple templates named '"+name+"'. Each template needs a unique name.");throw new Error("This template name is reserved: "+name)}};Template.__define__=function(name,renderFunc){Template.__checkName(name);Template[name]=new Template("Template."+name,renderFunc);Template[name]._NOWARN_OLDSTYLE_HELPERS=true};Template.body=new Template("body",function(){var view=this;return _.map(Template.body.contentRenderFuncs,function(func){return func.apply(view)})});Template.body.contentRenderFuncs=[];Template.body.view=null;Template.body.addContent=function(renderFunc){Template.body.contentRenderFuncs.push(renderFunc)};Template.body.renderToDocument=function(){if(Template.body.view)return;var view=Blaze.render(Template.body,document.body);Template.body.view=view};UI.body=Template.body;Template.__body__=Template.body;Template.__body__.__contentParts=Template.body.contentViews;Template.__body__.__instantiate=Template.body.renderToDocument}).call(this);(function(){Template.__checkName("__dynamic");Template["__dynamic"]=new Template("Template.__dynamic",function(){var view=this;return[Blaze.View("lookup:checkContext",function(){return Spacebars.mustache(view.lookup("checkContext"))}),"\n  ",Blaze.If(function(){return Spacebars.call(view.lookup("dataContextPresent"))},function(){return["\n    ",Spacebars.include(view.lookupTemplate("__dynamicWithDataContext"),function(){return Blaze._InOuterTemplateScope(view,function(){return Spacebars.include(function(){return Spacebars.call(view.templateContentBlock)})})}),"\n  "]},function(){return["\n    \n    ",Blaze._TemplateWith(function(){return{template:Spacebars.call(view.lookup("template")),data:Spacebars.call(view.lookup(".."))}},function(){return Spacebars.include(view.lookupTemplate("__dynamicWithDataContext"),function(){return Blaze._InOuterTemplateScope(view,function(){return Spacebars.include(function(){return Spacebars.call(view.templateContentBlock)})})})}),"\n  "]})]});Template.__checkName("__dynamicWithDataContext");Template["__dynamicWithDataContext"]=new Template("Template.__dynamicWithDataContext",function(){var view=this;return Spacebars.With(function(){return Spacebars.dataMustache(view.lookup("chooseTemplate"),view.lookup("template"))},function(){return["\n    \n    ",Blaze._TemplateWith(function(){return Spacebars.call(Spacebars.dot(view.lookup(".."),"data"))},function(){return Spacebars.include(view.lookupTemplate(".."),function(){return Blaze._InOuterTemplateScope(view,function(){return Spacebars.include(function(){return Spacebars.call(view.templateContentBlock)})})})}),"\n  "]})})}).call(this);(function(){var Template=Blaze.Template;Template.__dynamicWithDataContext.helpers({chooseTemplate:function(name){return Blaze._getTemplate(name,function(){return Template.instance()})}});Template.__dynamic.helpers({dataContextPresent:function(){return _.has(this,"data")},checkContext:function(){if(!_.has(this,"template")){throw new Error("Must specify name in the 'template' argument "+"to {{> Template.dynamic}}.")}_.each(this,function(v,k){if(k!=="template"&&k!=="data"){throw new Error("Invalid argument to {{> Template.dynamic}}: "+k)}})}})}).call(this);if(typeof Package==="undefined")Package={};Package.templating={Template:Template}})();(function(){var Meteor=Package.meteor.Meteor;var Template=Package.templating.Template;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var ReactiveVar=Package["reactive-var"].ReactiveVar;var Blaze=Package.blaze.Blaze;var UI=Package.blaze.UI;var Handlebars=Package.blaze.Handlebars;var Spacebars=Package.spacebars.Spacebars;var HTML=Package.htmljs.HTML;var meteorStatusI18n;(function(){(function(){Template.__checkName("meteorStatus");Template["meteorStatus"]=new Template("Template.meteorStatus",function(){var view=this;return Blaze.If(function(){return Spacebars.call(view.lookup("show"))},function(){return["\n        ",Blaze.If(function(){return Spacebars.call(view.lookup("isStyled"))},function(){return["\n            ",HTML.DIV({"class":function(){return["meteor-status ",Spacebars.mustache(view.lookup("position"))]}},Blaze.View("lookup:langDisconnected",function(){return Spacebars.mustache(view.lookup("langDisconnected"))}),Blaze.If(function(){return Spacebars.call(view.lookup("showLink"))},function(){return[" ",HTML.A({href:"#","class":"meteor-status-retry"},Blaze.View("lookup:langRetryLink",function(){return Spacebars.mustache(view.lookup("langRetryLink"))}))]})),"\n        "]},function(){return["\n            ",Blaze.View("lookup:langDisconnected",function(){return Spacebars.mustache(view.lookup("langDisconnected"))}),Blaze.If(function(){return Spacebars.call(view.lookup("showLink"))},function(){return[" ",HTML.A({href:"#","class":"meteor-status-retry"},Blaze.View("lookup:langRetryLink",function(){return Spacebars.mustache(view.lookup("langRetryLink"))}))]}),"\n        "]}),"\n    "]})})}).call(this);(function(){Template.meteorStatus.onCreated(function(){var instance=this;instance.updateCountdownTimeout;instance.nextRetry=new ReactiveVar(0);instance.options={style:true,lang:"en",position:"bottom",showLink:true,msgText:"",linkText:""};instance.firstConnection=new ReactiveVar(true);if(Template.currentData()){for(var property in instance.options){if(Template.currentData()[property]!==undefined){instance.options[property]=Template.currentData()[property]}}}Tracker.autorun(function(){if(Meteor.status().status==="waiting"){instance.updateCountdownTimeout=Meteor.setInterval(function(){instance.nextRetry.set(Math.round((Meteor.status().retryTime-(new Date).getTime())/1e3))},1e3)}else{instance.nextRetry.set(0);Meteor.clearInterval(instance.updateCountdownTimeout)}});Tracker.autorun(function(computation){if(Meteor.status().connected&&Meteor.status().status==="connected"){instance.firstConnection.set(false);computation.stop()}})});Template.meteorStatus.helpers({langDisconnected:function(){if(Template.instance().options.msgText){return Template.instance().options.msgText.replace("%delay%",Template.instance().nextRetry.get())}else{return meteorStatusI18n[Template.instance().options.lang].disconnected.replace("%delay%",Template.instance().nextRetry.get())}},langRetryLink:function(){if(Template.instance().options.linkText){return Template.instance().options.linkText}else{return meteorStatusI18n[Template.instance().options.lang].retry}},isStyled:function(){return Template.instance().options.style},showLink:function(){return Template.instance().options.showLink},position:function(){if(Template.instance().options.position==="top"){return"meteor-status-top"}return"meteor-status-bottom"},show:function(){if(!Template.instance().firstConnection.get()&&!Meteor.status().connected&&Meteor.status().status!=="offline"&&Meteor.status().retryCount>1){return true}return false}});Template.meteorStatus.events({"click a.meteor-status-retry":function(){if(Meteor.status().status!=="connecting"){Meteor.reconnect()}return false}})}).call(this);(function(){meteorStatusI18n={en:{disconnected:"Disconnected from server, trying to reconnect in %delay%s.",retry:"Retry now"},es:{disconnected:"Desconectado del servidor, reconectando en %delay% segundos.",retry:"Reintentar ahora"},fr:{disconnected:"Déconnecté du serveur, prochaine tentative de reconnexion dans %delay%s.",retry:"Réessayer"},zh:{disconnected:"从服务器断开连接，%delay%秒后将尝试重新链接。",retry:"现在再试"},ar:{disconnected:"انقطع الاتصال، جاري اعادة المحاولة خلال %delay%ث.",retry:"جرب الآن"}}}).call(this)}).call(this);if(typeof Package==="undefined")Package={};Package["255kb:meteor-status"]={}})();