(function(){var Meteor=Package.meteor.Meteor;var Template=Package.templating.Template;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var ReactiveVar=Package["reactive-var"].ReactiveVar;var Blaze=Package.blaze.Blaze;var UI=Package.blaze.UI;var Handlebars=Package.blaze.Handlebars;var Spacebars=Package.spacebars.Spacebars;var HTML=Package.htmljs.HTML;var meteorStatusI18n;(function(){(function(){Template.__checkName("meteorStatus");Template["meteorStatus"]=new Template("Template.meteorStatus",function(){var view=this;return Blaze.If(function(){return Spacebars.call(view.lookup("show"))},function(){return["\n        ",Blaze.If(function(){return Spacebars.call(view.lookup("isStyled"))},function(){return["\n            ",HTML.DIV({"class":function(){return["meteor-status ",Spacebars.mustache(view.lookup("position"))]}},Blaze.View("lookup:langDisconnected",function(){return Spacebars.mustache(view.lookup("langDisconnected"))}),Blaze.If(function(){return Spacebars.call(view.lookup("showLink"))},function(){return[" ",HTML.A({href:"#","class":"meteor-status-retry"},Blaze.View("lookup:langRetryLink",function(){return Spacebars.mustache(view.lookup("langRetryLink"))}))]})),"\n        "]},function(){return["\n            ",Blaze.View("lookup:langDisconnected",function(){return Spacebars.mustache(view.lookup("langDisconnected"))}),Blaze.If(function(){return Spacebars.call(view.lookup("showLink"))},function(){return[" ",HTML.A({href:"#","class":"meteor-status-retry"},Blaze.View("lookup:langRetryLink",function(){return Spacebars.mustache(view.lookup("langRetryLink"))}))]}),"\n        "]}),"\n    "]})})}).call(this);(function(){Template.meteorStatus.onCreated(function(){var instance=this;instance.updateCountdownTimeout;instance.nextRetry=new ReactiveVar(0);instance.options={style:true,lang:"en",position:"bottom",showLink:true,msgText:"",linkText:""};instance.firstConnection=new ReactiveVar(true);if(Template.currentData()){for(var property in instance.options){if(Template.currentData()[property]!==undefined){instance.options[property]=Template.currentData()[property]}}}Tracker.autorun(function(){if(Meteor.status().status==="waiting"){instance.updateCountdownTimeout=Meteor.setInterval(function(){instance.nextRetry.set(Math.round((Meteor.status().retryTime-(new Date).getTime())/1e3))},1e3)}else{instance.nextRetry.set(0);Meteor.clearInterval(instance.updateCountdownTimeout)}});Tracker.autorun(function(computation){if(Meteor.status().connected&&Meteor.status().status==="connected"){instance.firstConnection.set(false);computation.stop()}})});Template.meteorStatus.helpers({langDisconnected:function(){if(Template.instance().options.msgText){return Template.instance().options.msgText.replace("%delay%",Template.instance().nextRetry.get())}else{return meteorStatusI18n[Template.instance().options.lang].disconnected.replace("%delay%",Template.instance().nextRetry.get())}},langRetryLink:function(){if(Template.instance().options.linkText){return Template.instance().options.linkText}else{return meteorStatusI18n[Template.instance().options.lang].retry}},isStyled:function(){return Template.instance().options.style},showLink:function(){return Template.instance().options.showLink},position:function(){if(Template.instance().options.position==="top"){return"meteor-status-top"}return"meteor-status-bottom"},show:function(){if(!Template.instance().firstConnection.get()&&!Meteor.status().connected&&Meteor.status().status!=="offline"&&Meteor.status().retryCount>1){return true}return false}});Template.meteorStatus.events({"click a.meteor-status-retry":function(){if(Meteor.status().status!=="connecting"){Meteor.reconnect()}return false}})}).call(this);(function(){meteorStatusI18n={en:{disconnected:"Disconnected from server, trying to reconnect in %delay%s.",retry:"Retry now"},es:{disconnected:"Desconectado del servidor, reconectando en %delay% segundos.",retry:"Reintentar ahora"},fr:{disconnected:"Déconnecté du serveur, prochaine tentative de reconnexion dans %delay%s.",retry:"Réessayer"},zh:{disconnected:"从服务器断开连接，%delay%秒后将尝试重新链接。",retry:"现在再试"},ar:{disconnected:"انقطع الاتصال، جاري اعادة المحاولة خلال %delay%ث.",retry:"جرب الآن"}}}).call(this)}).call(this);if(typeof Package==="undefined")Package={};Package["255kb:meteor-status"]={}})();