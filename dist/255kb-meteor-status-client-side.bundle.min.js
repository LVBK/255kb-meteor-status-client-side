(function(){var Meteor=Package.meteor.Meteor;var $=Package.jquery.$;var jQuery=Package.jquery.jQuery;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var check=Package.check.check;var Match=Package.check.Match;var _=Package.underscore._;var HTML=Package.htmljs.HTML;var ObserveSequence=Package["observe-sequence"].ObserveSequence;var ReactiveVar=Package["reactive-var"].ReactiveVar;var Blaze,AttributeHandler,makeAttributeHandler,ElementAttributesUpdater,UI,Handlebars;(function(){(function(){Blaze={};Blaze._escape=function(){var escape_map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","&":"&amp;"};var escape_one=function(c){return escape_map[c]};return function(x){return x.replace(/[&<>"'`]/g,escape_one)}}();Blaze._warn=function(msg){msg="Warning: "+msg;if(typeof console!=="undefined"&&console.warn){console.warn(msg)}}}).call(this);(function(){var DOMBackend={};Blaze._DOMBackend=DOMBackend;var $jq=typeof jQuery!=="undefined"?jQuery:typeof Package!=="undefined"?Package.jquery&&Package.jquery.jQuery:null;if(!$jq)throw new Error("jQuery not found");DOMBackend._$jq=$jq;DOMBackend.parseHTML=function(html){return $jq.parseHTML(html)||[]};DOMBackend.Events={delegateEvents:function(elem,type,selector,handler){$jq(elem).on(type,selector,handler)},undelegateEvents:function(elem,type,handler){$jq(elem).off(type,"**",handler)},bindEventCapturer:function(elem,type,selector,handler){var $elem=$jq(elem);var wrapper=function(event){event=$jq.event.fix(event);event.currentTarget=event.target;var $target=$jq(event.currentTarget);if($target.is($elem.find(selector)))handler.call(elem,event)};handler._meteorui_wrapper=wrapper;type=DOMBackend.Events.parseEventType(type);elem.addEventListener(type,wrapper,true)},unbindEventCapturer:function(elem,type,handler){type=DOMBackend.Events.parseEventType(type);elem.removeEventListener(type,handler._meteorui_wrapper,true)},parseEventType:function(type){var dotLoc=type.indexOf(".");if(dotLoc>=0)return type.slice(0,dotLoc);return type}};var NOOP=function(){};var TeardownCallback=function(func){this.next=this;this.prev=this;this.func=func};TeardownCallback.prototype.linkBefore=function(oldElt){this.prev=oldElt.prev;this.next=oldElt;oldElt.prev.next=this;oldElt.prev=this};TeardownCallback.prototype.unlink=function(){this.prev.next=this.next;this.next.prev=this.prev};TeardownCallback.prototype.go=function(){var func=this.func;func&&func()};TeardownCallback.prototype.stop=TeardownCallback.prototype.unlink;DOMBackend.Teardown={_JQUERY_EVENT_NAME:"blaze_teardown_watcher",_CB_PROP:"$blaze_teardown_callbacks",onElementTeardown:function(elem,func){var elt=new TeardownCallback(func);var propName=DOMBackend.Teardown._CB_PROP;if(!elem[propName]){elem[propName]=new TeardownCallback;$jq(elem).on(DOMBackend.Teardown._JQUERY_EVENT_NAME,NOOP)}elt.linkBefore(elem[propName]);return elt},tearDownElement:function(elem){var elems=[];var nodeList=elem.getElementsByTagName("*");for(var i=0;i<nodeList.length;i++){elems.push(nodeList[i])}elems.push(elem);$jq.cleanData(elems)}};$jq.event.special[DOMBackend.Teardown._JQUERY_EVENT_NAME]={setup:function(){},teardown:function(){var elem=this;var callbacks=elem[DOMBackend.Teardown._CB_PROP];if(callbacks){var elt=callbacks.next;while(elt!==callbacks){elt.go();elt=elt.next}callbacks.go();elem[DOMBackend.Teardown._CB_PROP]=null}}};DOMBackend.findBySelector=function(selector,context){return $jq(selector,context)}}).call(this);(function(){var _emptyArray=Object.freeze?Object.freeze([]):[];Blaze._DOMRange=function(nodeAndRangeArray){if(!(this instanceof DOMRange))return new DOMRange(nodeAndRangeArray);var members=nodeAndRangeArray||_emptyArray;if(!(members&&typeof members.length==="number"))throw new Error("Expected array");for(var i=0;i<members.length;i++)this._memberIn(members[i]);this.members=members;this.emptyRangePlaceholder=null;this.attached=false;this.parentElement=null;this.parentRange=null;this.attachedCallbacks=_emptyArray};var DOMRange=Blaze._DOMRange;DOMRange._USE_COMMENT_PLACEHOLDERS=function(){var result=false;var textNode=document.createTextNode("");try{textNode.someProp=true}catch(e){result=true}return result}();DOMRange._insert=function(rangeOrNode,parentElement,nextNode,_isMove){var m=rangeOrNode;if(m instanceof DOMRange){m.attach(parentElement,nextNode,_isMove)}else{if(_isMove)DOMRange._moveNodeWithHooks(m,parentElement,nextNode);else DOMRange._insertNodeWithHooks(m,parentElement,nextNode)}};DOMRange._remove=function(rangeOrNode){var m=rangeOrNode;if(m instanceof DOMRange){m.detach()}else{DOMRange._removeNodeWithHooks(m)}};DOMRange._removeNodeWithHooks=function(n){if(!n.parentNode)return;if(n.nodeType===1&&n.parentNode._uihooks&&n.parentNode._uihooks.removeElement){n.parentNode._uihooks.removeElement(n)}else{n.parentNode.removeChild(n)}};DOMRange._insertNodeWithHooks=function(n,parent,next){next=next||null;if(n.nodeType===1&&parent._uihooks&&parent._uihooks.insertElement){parent._uihooks.insertElement(n,next)}else{parent.insertBefore(n,next)}};DOMRange._moveNodeWithHooks=function(n,parent,next){if(n.parentNode!==parent)return;next=next||null;if(n.nodeType===1&&parent._uihooks&&parent._uihooks.moveElement){parent._uihooks.moveElement(n,next)}else{parent.insertBefore(n,next)}};DOMRange.forElement=function(elem){if(elem.nodeType!==1)throw new Error("Expected element, found: "+elem);var range=null;while(elem&&!range){range=elem.$blaze_range||null;if(!range)elem=elem.parentNode}return range};DOMRange.prototype.attach=function(parentElement,nextNode,_isMove,_isReplace){if(_isMove||_isReplace){if(!(this.parentElement===parentElement&&this.attached))throw new Error("Can only move or replace an attached DOMRange, and only under the same parent element")}var members=this.members;if(members.length){this.emptyRangePlaceholder=null;for(var i=0;i<members.length;i++){DOMRange._insert(members[i],parentElement,nextNode,_isMove)}}else{var placeholder=DOMRange._USE_COMMENT_PLACEHOLDERS?document.createComment(""):document.createTextNode("");this.emptyRangePlaceholder=placeholder;parentElement.insertBefore(placeholder,nextNode||null)}this.attached=true;this.parentElement=parentElement;if(!(_isMove||_isReplace)){for(var i=0;i<this.attachedCallbacks.length;i++){var obj=this.attachedCallbacks[i];obj.attached&&obj.attached(this,parentElement)}}};DOMRange.prototype.setMembers=function(newNodeAndRangeArray){var newMembers=newNodeAndRangeArray;if(!(newMembers&&typeof newMembers.length==="number"))throw new Error("Expected array");var oldMembers=this.members;for(var i=0;i<oldMembers.length;i++)this._memberOut(oldMembers[i]);for(var i=0;i<newMembers.length;i++)this._memberIn(newMembers[i]);if(!this.attached){this.members=newMembers}else{if(newMembers.length||oldMembers.length){var nextNode=this.lastNode().nextSibling;var parentElement=this.parentElement;this.detach(true);this.members=newMembers;this.attach(parentElement,nextNode,false,true)}}};DOMRange.prototype.firstNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var m=this.members[0];return m instanceof DOMRange?m.firstNode():m};DOMRange.prototype.lastNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var m=this.members[this.members.length-1];return m instanceof DOMRange?m.lastNode():m};DOMRange.prototype.detach=function(_isReplace){if(!this.attached)throw new Error("Must be attached");var oldParentElement=this.parentElement;var members=this.members;if(members.length){for(var i=0;i<members.length;i++){DOMRange._remove(members[i])}}else{var placeholder=this.emptyRangePlaceholder;this.parentElement.removeChild(placeholder);this.emptyRangePlaceholder=null}if(!_isReplace){this.attached=false;this.parentElement=null;for(var i=0;i<this.attachedCallbacks.length;i++){var obj=this.attachedCallbacks[i];obj.detached&&obj.detached(this,oldParentElement)}}};DOMRange.prototype.addMember=function(newMember,atIndex,_isMove){var members=this.members;if(!(atIndex>=0&&atIndex<=members.length))throw new Error("Bad index in range.addMember: "+atIndex);if(!_isMove)this._memberIn(newMember);if(!this.attached){members.splice(atIndex,0,newMember)}else if(members.length===0){this.setMembers([newMember])}else{var nextNode;if(atIndex===members.length){nextNode=this.lastNode().nextSibling}else{var m=members[atIndex];nextNode=m instanceof DOMRange?m.firstNode():m}members.splice(atIndex,0,newMember);DOMRange._insert(newMember,this.parentElement,nextNode,_isMove)}};DOMRange.prototype.removeMember=function(atIndex,_isMove){var members=this.members;if(!(atIndex>=0&&atIndex<members.length))throw new Error("Bad index in range.removeMember: "+atIndex);if(_isMove){members.splice(atIndex,1)}else{var oldMember=members[atIndex];this._memberOut(oldMember);if(members.length===1){this.setMembers(_emptyArray)}else{members.splice(atIndex,1);if(this.attached)DOMRange._remove(oldMember)}}};DOMRange.prototype.moveMember=function(oldIndex,newIndex){var member=this.members[oldIndex];this.removeMember(oldIndex,true);this.addMember(member,newIndex,true)};DOMRange.prototype.getMember=function(atIndex){var members=this.members;if(!(atIndex>=0&&atIndex<members.length))throw new Error("Bad index in range.getMember: "+atIndex);return this.members[atIndex]};DOMRange.prototype._memberIn=function(m){if(m instanceof DOMRange)m.parentRange=this;else if(m.nodeType===1)m.$blaze_range=this};DOMRange._destroy=function(m,_skipNodes){if(m instanceof DOMRange){if(m.view)Blaze._destroyView(m.view,_skipNodes)}else if(!_skipNodes&&m.nodeType===1){if(m.$blaze_range){Blaze._destroyNode(m);m.$blaze_range=null}}};DOMRange.prototype._memberOut=DOMRange._destroy;DOMRange.prototype.destroyMembers=function(_skipNodes){var members=this.members;for(var i=0;i<members.length;i++)this._memberOut(members[i],_skipNodes)};DOMRange.prototype.destroy=function(_skipNodes){DOMRange._destroy(this,_skipNodes)};DOMRange.prototype.containsElement=function(elem){if(!this.attached)throw new Error("Must be attached");if(!Blaze._elementContains(this.parentElement,elem))return false;while(elem.parentNode!==this.parentElement)elem=elem.parentNode;var range=elem.$blaze_range;while(range&&range!==this)range=range.parentRange;return range===this};DOMRange.prototype.containsRange=function(range){if(!this.attached)throw new Error("Must be attached");if(!range.attached)return false;if(range.parentElement!==this.parentElement)return this.containsElement(range.parentElement);if(range===this)return false;while(range&&range!==this)range=range.parentRange;return range===this};DOMRange.prototype.onAttached=function(attached){this.onAttachedDetached({attached:attached})};DOMRange.prototype.onAttachedDetached=function(callbacks){if(this.attachedCallbacks===_emptyArray)this.attachedCallbacks=[];this.attachedCallbacks.push(callbacks)};DOMRange.prototype.$=function(selector){var self=this;var parentNode=this.parentElement;if(!parentNode)throw new Error("Can't select in removed DomRange");if(parentNode.nodeType===11)throw new Error("Can't use $ on an offscreen range");var results=Blaze._DOMBackend.findBySelector(selector,parentNode);var filterFunc=function(elem){if(typeof elem==="number")elem=this;return self.containsElement(elem)};if(!results.filter){var newResults=[];for(var i=0;i<results.length;i++){var x=results[i];if(filterFunc(x))newResults.push(x)}results=newResults}else{results=results.filter(filterFunc)}return results};Blaze._elementContains=function(a,b){if(a.nodeType!==1)return false;if(a===b)return false;if(a.compareDocumentPosition){return a.compareDocumentPosition(b)&16}else{b=b.parentNode;if(!(b&&b.nodeType===1))return false;if(a===b)return true;return a.contains(b)}}}).call(this);(function(){var EventSupport=Blaze._EventSupport={};var DOMBackend=Blaze._DOMBackend;var eventsToDelegate=EventSupport.eventsToDelegate={blur:1,change:1,click:1,focus:1,focusin:1,focusout:1,reset:1,submit:1};var EVENT_MODE=EventSupport.EVENT_MODE={TBD:0,BUBBLING:1,CAPTURING:2};var NEXT_HANDLERREC_ID=1;var HandlerRec=function(elem,type,selector,handler,recipient){this.elem=elem;this.type=type;this.selector=selector;this.handler=handler;this.recipient=recipient;this.id=NEXT_HANDLERREC_ID++;this.mode=EVENT_MODE.TBD;this.delegatedHandler=function(h){return function(evt){if(!h.selector&&evt.currentTarget!==evt.target)return;return h.handler.apply(h.recipient,arguments)}}(this);var tryCapturing=elem.addEventListener&&!_.has(eventsToDelegate,DOMBackend.Events.parseEventType(type));if(tryCapturing){this.capturingHandler=function(h){return function(evt){if(h.mode===EVENT_MODE.TBD){if(evt.bubbles){h.mode=EVENT_MODE.BUBBLING;DOMBackend.Events.unbindEventCapturer(h.elem,h.type,h.capturingHandler);return}else{h.mode=EVENT_MODE.CAPTURING;DOMBackend.Events.undelegateEvents(h.elem,h.type,h.delegatedHandler)}}h.delegatedHandler(evt)}}(this)}else{this.mode=EVENT_MODE.BUBBLING}};EventSupport.HandlerRec=HandlerRec;HandlerRec.prototype.bind=function(){if(this.mode!==EVENT_MODE.BUBBLING){DOMBackend.Events.bindEventCapturer(this.elem,this.type,this.selector||"*",this.capturingHandler)}if(this.mode!==EVENT_MODE.CAPTURING)DOMBackend.Events.delegateEvents(this.elem,this.type,this.selector||"*",this.delegatedHandler)};HandlerRec.prototype.unbind=function(){if(this.mode!==EVENT_MODE.BUBBLING)DOMBackend.Events.unbindEventCapturer(this.elem,this.type,this.capturingHandler);if(this.mode!==EVENT_MODE.CAPTURING)DOMBackend.Events.undelegateEvents(this.elem,this.type,this.delegatedHandler)};EventSupport.listen=function(element,events,selector,handler,recipient,getParentRecipient){try{element=element}finally{}var eventTypes=[];events.replace(/[^ \/]+/g,function(e){eventTypes.push(e)});var newHandlerRecs=[];for(var i=0,N=eventTypes.length;i<N;i++){var type=eventTypes[i];var eventDict=element.$blaze_events;if(!eventDict)eventDict=element.$blaze_events={};var info=eventDict[type];if(!info){info=eventDict[type]={};info.handlers=[]}var handlerList=info.handlers;var handlerRec=new HandlerRec(element,type,selector,handler,recipient);newHandlerRecs.push(handlerRec);handlerRec.bind();handlerList.push(handlerRec);if(getParentRecipient){for(var r=getParentRecipient(recipient);r;r=getParentRecipient(r)){for(var j=0,Nj=handlerList.length;j<Nj;j++){var h=handlerList[j];if(h.recipient===r){h.unbind();h.bind();handlerList.splice(j,1);handlerList.push(h);j--;Nj--}}}}}return{stop:function(){var eventDict=element.$blaze_events;if(!eventDict)return;for(var i=0;i<newHandlerRecs.length;i++){var handlerToRemove=newHandlerRecs[i];var info=eventDict[handlerToRemove.type];if(!info)continue;var handlerList=info.handlers;for(var j=handlerList.length-1;j>=0;j--){if(handlerList[j]===handlerToRemove){handlerToRemove.unbind();handlerList.splice(j,1)}}}newHandlerRecs.length=0}}}}).call(this);(function(){var jsUrlsAllowed=false;Blaze._allowJavascriptUrls=function(){jsUrlsAllowed=true};Blaze._javascriptUrlsAllowed=function(){return jsUrlsAllowed};AttributeHandler=function(name,value){this.name=name;this.value=value};Blaze._AttributeHandler=AttributeHandler;AttributeHandler.prototype.update=function(element,oldValue,value){if(value===null){if(oldValue!==null)element.removeAttribute(this.name)}else{element.setAttribute(this.name,value)}};AttributeHandler.extend=function(options){var curType=this;var subType=function AttributeHandlerSubtype(){AttributeHandler.apply(this,arguments)};subType.prototype=new curType;subType.extend=curType.extend;if(options)_.extend(subType.prototype,options);return subType};var DiffingAttributeHandler=AttributeHandler.extend({update:function(element,oldValue,value){if(!this.getCurrentValue||!this.setValue||!this.parseValue)throw new Error("Missing methods in subclass of 'DiffingAttributeHandler'");var oldAttrsMap=oldValue?this.parseValue(oldValue):{};var newAttrsMap=value?this.parseValue(value):{};var attrString=this.getCurrentValue(element);var attrsMap=attrString?this.parseValue(attrString):{};_.each(_.keys(oldAttrsMap),function(t){if(!(t in newAttrsMap))delete attrsMap[t]});_.each(_.keys(newAttrsMap),function(t){attrsMap[t]=newAttrsMap[t]});this.setValue(element,_.values(attrsMap).join(" "))}});var ClassHandler=DiffingAttributeHandler.extend({getCurrentValue:function(element){return element.className},setValue:function(element,className){element.className=className},parseValue:function(attrString){var tokens={};_.each(attrString.split(" "),function(token){if(token)tokens[token]=token});return tokens}});var SVGClassHandler=ClassHandler.extend({getCurrentValue:function(element){return element.className.baseVal},setValue:function(element,className){element.setAttribute("class",className)}});var StyleHandler=DiffingAttributeHandler.extend({getCurrentValue:function(element){return element.getAttribute("style")},setValue:function(element,style){if(style===""){element.removeAttribute("style")}else{element.setAttribute("style",style)}},parseValue:function(attrString){var tokens={};var regex=/(\*?[-#\/\*\\\w]+(?:\[[0-9a-z_-]+\])?)\s*:\s*(?:\'(?:\\\'|.)*?\'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+[;\s]*/g;var match=regex.exec(attrString);while(match){tokens[" "+match[1]]=match[0].trim?match[0].trim():$.trim(match[0]);match=regex.exec(attrString)}return tokens}});var BooleanHandler=AttributeHandler.extend({update:function(element,oldValue,value){var name=this.name;if(value==null){if(oldValue!=null)element[name]=false}else{element[name]=true}}});var DOMPropertyHandler=AttributeHandler.extend({update:function(element,oldValue,value){var name=this.name;if(value!==element[name])element[name]=value}});var XlinkHandler=AttributeHandler.extend({update:function(element,oldValue,value){var NS="http://www.w3.org/1999/xlink";if(value===null){if(oldValue!==null)element.removeAttributeNS(NS,this.name)}else{element.setAttributeNS(NS,this.name,this.value)}}});var isSVGElement=function(elem){return"ownerSVGElement"in elem};var isUrlAttribute=function(tagName,attrName){var urlAttrs={FORM:["action"],BODY:["background"],BLOCKQUOTE:["cite"],Q:["cite"],DEL:["cite"],INS:["cite"],OBJECT:["classid","codebase","data","usemap"],APPLET:["codebase"],A:["href"],AREA:["href"],LINK:["href"],BASE:["href"],IMG:["longdesc","src","usemap"],FRAME:["longdesc","src"],IFRAME:["longdesc","src"],HEAD:["profile"],SCRIPT:["src"],INPUT:["src","usemap","formaction"],BUTTON:["formaction"],BASE:["href"],MENUITEM:["icon"],HTML:["manifest"],VIDEO:["poster"]};if(attrName==="itemid"){return true}var urlAttrNames=urlAttrs[tagName]||[];return _.contains(urlAttrNames,attrName)};if(Meteor.isClient){var anchorForNormalization=document.createElement("A")}var getUrlProtocol=function(url){if(Meteor.isClient){anchorForNormalization.href=url;return(anchorForNormalization.protocol||"").toLowerCase()}else{throw new Error("getUrlProtocol not implemented on the server")}};var origUpdate=AttributeHandler.prototype.update;var UrlHandler=AttributeHandler.extend({update:function(element,oldValue,value){var self=this;var args=arguments;if(Blaze._javascriptUrlsAllowed()){origUpdate.apply(self,args)}else{var isJavascriptProtocol=getUrlProtocol(value)==="javascript:";if(isJavascriptProtocol){Blaze._warn("URLs that use the 'javascript:' protocol are not "+"allowed in URL attribute values. "+"Call Blaze._allowJavascriptUrls() "+"to enable them.");origUpdate.apply(self,[element,oldValue,null])}else{origUpdate.apply(self,args)}}}});makeAttributeHandler=function(elem,name,value){if(name==="class"){if(isSVGElement(elem)){return new SVGClassHandler(name,value)}else{return new ClassHandler(name,value)}}else if(name==="style"){return new StyleHandler(name,value)}else if(elem.tagName==="OPTION"&&name==="selected"||elem.tagName==="INPUT"&&name==="checked"){return new BooleanHandler(name,value)}else if((elem.tagName==="TEXTAREA"||elem.tagName==="INPUT")&&name==="value"){return new DOMPropertyHandler(name,value)}else if(name.substring(0,6)==="xlink:"){return new XlinkHandler(name.substring(6),value)}else if(isUrlAttribute(elem.tagName,name)){return new UrlHandler(name,value)}else{return new AttributeHandler(name,value)}};ElementAttributesUpdater=function(elem){this.elem=elem;this.handlers={}};ElementAttributesUpdater.prototype.update=function(newAttrs){var elem=this.elem;var handlers=this.handlers;for(var k in handlers){if(!_.has(newAttrs,k)){var handler=handlers[k];var oldValue=handler.value;handler.value=null;handler.update(elem,oldValue,null);delete handlers[k]}}for(var k in newAttrs){var handler=null;var oldValue;var value=newAttrs[k];if(!_.has(handlers,k)){if(value!==null){handler=makeAttributeHandler(elem,k,value);handlers[k]=handler;oldValue=null}}else{handler=handlers[k];oldValue=handler.value}if(oldValue!==value){handler.value=value;handler.update(elem,oldValue,value);if(value===null)delete handlers[k]}}}}).call(this);(function(){Blaze._materializeDOM=function(htmljs,intoArray,parentView,_existingWorkStack){var workStack=_existingWorkStack||[];materializeDOMInner(htmljs,intoArray,parentView,workStack);if(!_existingWorkStack){while(workStack.length){var task=workStack.pop();task()}}return intoArray};var materializeDOMInner=function(htmljs,intoArray,parentView,workStack){if(htmljs==null){return}switch(typeof htmljs){case"string":case"boolean":case"number":intoArray.push(document.createTextNode(String(htmljs)));return;case"object":if(htmljs.htmljsType){switch(htmljs.htmljsType){case HTML.Tag.htmljsType:intoArray.push(materializeTag(htmljs,parentView,workStack));return;case HTML.CharRef.htmljsType:intoArray.push(document.createTextNode(htmljs.str));return;case HTML.Comment.htmljsType:intoArray.push(document.createComment(htmljs.sanitizedValue));return;case HTML.Raw.htmljsType:var nodes=Blaze._DOMBackend.parseHTML(htmljs.value);for(var i=0;i<nodes.length;i++)intoArray.push(nodes[i]);return}}else if(HTML.isArray(htmljs)){for(var i=htmljs.length-1;i>=0;i--){workStack.push(_.bind(Blaze._materializeDOM,null,htmljs[i],intoArray,parentView,workStack))}return}else{if(htmljs instanceof Blaze.Template){htmljs=htmljs.constructView()}if(htmljs instanceof Blaze.View){Blaze._materializeView(htmljs,parentView,workStack,intoArray);return}}}throw new Error("Unexpected object in htmljs: "+htmljs)};var materializeTag=function(tag,parentView,workStack){var tagName=tag.tagName;var elem;if((HTML.isKnownSVGElement(tagName)||isSVGAnchor(tag))&&document.createElementNS){elem=document.createElementNS("http://www.w3.org/2000/svg",tagName)}else{elem=document.createElement(tagName)}var rawAttrs=tag.attrs;var children=tag.children;if(tagName==="textarea"&&tag.children.length&&!(rawAttrs&&"value"in rawAttrs)){if(typeof rawAttrs==="function"||HTML.isArray(rawAttrs)){throw new Error("Can't have reactive children of TEXTAREA node; "+"use the 'value' attribute instead.")}rawAttrs=_.extend({},rawAttrs||null);rawAttrs.value=Blaze._expand(children,parentView);children=[]}if(rawAttrs){var attrUpdater=new ElementAttributesUpdater(elem);var updateAttributes=function(){var expandedAttrs=Blaze._expandAttributes(rawAttrs,parentView);var flattenedAttrs=HTML.flattenAttributes(expandedAttrs);var stringAttrs={};for(var attrName in flattenedAttrs){stringAttrs[attrName]=Blaze._toText(flattenedAttrs[attrName],parentView,HTML.TEXTMODE.STRING)}attrUpdater.update(stringAttrs)};var updaterComputation;if(parentView){updaterComputation=parentView.autorun(updateAttributes,undefined,"updater")}else{updaterComputation=Tracker.nonreactive(function(){return Tracker.autorun(function(){Tracker._withCurrentView(parentView,updateAttributes)})})}Blaze._DOMBackend.Teardown.onElementTeardown(elem,function attrTeardown(){updaterComputation.stop()})}if(children.length){var childNodesAndRanges=[];workStack.push(function(){for(var i=0;i<childNodesAndRanges.length;i++){var x=childNodesAndRanges[i];if(x instanceof Blaze._DOMRange)x.attach(elem);else elem.appendChild(x)}});workStack.push(_.bind(Blaze._materializeDOM,null,children,childNodesAndRanges,parentView,workStack))}return elem};var isSVGAnchor=function(node){return node.tagName==="a"&&node.attrs&&node.attrs["xlink:href"]!==undefined}}).call(this);(function(){var debugFunc;Blaze._throwNextException=false;Blaze._reportException=function(e,msg){if(Blaze._throwNextException){Blaze._throwNextException=false;throw e}if(!debugFunc)debugFunc=function(){return typeof Meteor!=="undefined"?Meteor._debug:typeof console!=="undefined"&&console.log?console.log:function(){}};debugFunc()(msg||"Exception caught in template:",e.stack||e.message||e)};Blaze._wrapCatchingExceptions=function(f,where){if(typeof f!=="function")return f;return function(){try{return f.apply(this,arguments)}catch(e){Blaze._reportException(e,"Exception in "+where+":")}}}}).call(this);(function(){Blaze.View=function(name,render){if(!(this instanceof Blaze.View))return new Blaze.View(name,render);if(typeof name==="function"){render=name;name=""}this.name=name;this._render=render;this._callbacks={created:null,rendered:null,destroyed:null};this.isCreated=false;this._isCreatedForExpansion=false;this.isRendered=false;this._isAttached=false;this.isDestroyed=false;this._isInRender=false;this.parentView=null;this._domrange=null;this._hasGeneratedParent=false;this._scopeBindings={};this.renderCount=0};Blaze.View.prototype._render=function(){return null};Blaze.View.prototype.onViewCreated=function(cb){this._callbacks.created=this._callbacks.created||[];this._callbacks.created.push(cb)};Blaze.View.prototype._onViewRendered=function(cb){this._callbacks.rendered=this._callbacks.rendered||[];this._callbacks.rendered.push(cb)};Blaze.View.prototype.onViewReady=function(cb){var self=this;var fire=function(){Tracker.afterFlush(function(){if(!self.isDestroyed){Blaze._withCurrentView(self,function(){cb.call(self)})}})};self._onViewRendered(function onViewRendered(){if(self.isDestroyed)return;if(!self._domrange.attached)self._domrange.onAttached(fire);else fire()})};Blaze.View.prototype.onViewDestroyed=function(cb){this._callbacks.destroyed=this._callbacks.destroyed||[];this._callbacks.destroyed.push(cb)};Blaze.View.prototype.removeViewDestroyedListener=function(cb){var destroyed=this._callbacks.destroyed;if(!destroyed)return;var index=_.lastIndexOf(destroyed,cb);if(index!==-1){destroyed[index]=null}};Blaze.View.prototype.autorun=function(f,_inViewScope,displayName){var self=this;if(!self.isCreated){throw new Error("View#autorun must be called from the created callback at the earliest")}if(this._isInRender){throw new Error("Can't call View#autorun from inside render(); try calling it from the created or rendered callback")}if(Tracker.active){throw new Error("Can't call View#autorun from a Tracker Computation; try calling it from the created or rendered callback")}var templateInstanceFunc=Blaze.Template._currentTemplateInstanceFunc;var func=function viewAutorun(c){return Blaze._withCurrentView(_inViewScope||self,function(){return Blaze.Template._withTemplateInstanceFunc(templateInstanceFunc,function(){return f.call(self,c)})})};func.displayName=(self.name||"anonymous")+":"+(displayName||"anonymous");var comp=Tracker.autorun(func);var stopComputation=function(){comp.stop()};self.onViewDestroyed(stopComputation);comp.onStop(function(){self.removeViewDestroyedListener(stopComputation)});return comp};Blaze.View.prototype._errorIfShouldntCallSubscribe=function(){var self=this;if(!self.isCreated){throw new Error("View#subscribe must be called from the created callback at the earliest")}if(self._isInRender){throw new Error("Can't call View#subscribe from inside render(); try calling it from the created or rendered callback")}if(self.isDestroyed){throw new Error("Can't call View#subscribe from inside the destroyed callback, try calling it inside created or rendered.")}};Blaze.View.prototype.subscribe=function(args,options){var self=this;options=options||{};self._errorIfShouldntCallSubscribe();var subHandle;if(options.connection){subHandle=options.connection.subscribe.apply(options.connection,args)}else{subHandle=Meteor.subscribe.apply(Meteor,args)}self.onViewDestroyed(function(){subHandle.stop()});return subHandle};Blaze.View.prototype.firstNode=function(){if(!this._isAttached)throw new Error("View must be attached before accessing its DOM");return this._domrange.firstNode()};Blaze.View.prototype.lastNode=function(){if(!this._isAttached)throw new Error("View must be attached before accessing its DOM");return this._domrange.lastNode()};Blaze._fireCallbacks=function(view,which){Blaze._withCurrentView(view,function(){Tracker.nonreactive(function fireCallbacks(){var cbs=view._callbacks[which];for(var i=0,N=cbs&&cbs.length;i<N;i++)cbs[i]&&cbs[i].call(view)})})};Blaze._createView=function(view,parentView,forExpansion){if(view.isCreated)throw new Error("Can't render the same View twice");view.parentView=parentView||null;view.isCreated=true;if(forExpansion)view._isCreatedForExpansion=true;Blaze._fireCallbacks(view,"created")};var doFirstRender=function(view,initialContent){var domrange=new Blaze._DOMRange(initialContent);view._domrange=domrange;domrange.view=view;view.isRendered=true;Blaze._fireCallbacks(view,"rendered");var teardownHook=null;domrange.onAttached(function attached(range,element){view._isAttached=true;teardownHook=Blaze._DOMBackend.Teardown.onElementTeardown(element,function teardown(){Blaze._destroyView(view,true)})});view.onViewDestroyed(function(){teardownHook&&teardownHook.stop();teardownHook=null});return domrange};Blaze._materializeView=function(view,parentView,_workStack,_intoArray){Blaze._createView(view,parentView);var domrange;var lastHtmljs;Tracker.nonreactive(function(){view.autorun(function doRender(c){view.renderCount++;view._isInRender=true;var htmljs=view._render();view._isInRender=false;if(!c.firstRun){Tracker.nonreactive(function doMaterialize(){var rangesAndNodes=Blaze._materializeDOM(htmljs,[],view);if(!Blaze._isContentEqual(lastHtmljs,htmljs)){domrange.setMembers(rangesAndNodes);Blaze._fireCallbacks(view,"rendered")}})}lastHtmljs=htmljs;Tracker.onInvalidate(function(){if(domrange){domrange.destroyMembers()}})},undefined,"materialize");var initialContents;if(!_workStack){initialContents=Blaze._materializeDOM(lastHtmljs,[],view);domrange=doFirstRender(view,initialContents);initialContents=null}else{initialContents=[];_workStack.push(function(){domrange=doFirstRender(view,initialContents);initialContents=null;_intoArray.push(domrange)});_workStack.push(_.bind(Blaze._materializeDOM,null,lastHtmljs,initialContents,view,_workStack))}});if(!_workStack){return domrange}else{return null}};Blaze._expandView=function(view,parentView){Blaze._createView(view,parentView,true);view._isInRender=true;var htmljs=Blaze._withCurrentView(view,function(){return view._render()});view._isInRender=false;var result=Blaze._expand(htmljs,view);if(Tracker.active){Tracker.onInvalidate(function(){Blaze._destroyView(view)})}else{Blaze._destroyView(view)}return result};Blaze._HTMLJSExpander=HTML.TransformingVisitor.extend();Blaze._HTMLJSExpander.def({visitObject:function(x){if(x instanceof Blaze.Template)x=x.constructView();if(x instanceof Blaze.View)return Blaze._expandView(x,this.parentView);return HTML.TransformingVisitor.prototype.visitObject.call(this,x)},visitAttributes:function(attrs){if(typeof attrs==="function")attrs=Blaze._withCurrentView(this.parentView,attrs);return HTML.TransformingVisitor.prototype.visitAttributes.call(this,attrs)},visitAttribute:function(name,value,tag){if(typeof value==="function")value=Blaze._withCurrentView(this.parentView,value);return HTML.TransformingVisitor.prototype.visitAttribute.call(this,name,value,tag)}});var currentViewIfRendering=function(){var view=Blaze.currentView;return view&&view._isInRender?view:null};Blaze._expand=function(htmljs,parentView){parentView=parentView||currentViewIfRendering();return new Blaze._HTMLJSExpander({parentView:parentView}).visit(htmljs)};Blaze._expandAttributes=function(attrs,parentView){parentView=parentView||currentViewIfRendering();return new Blaze._HTMLJSExpander({parentView:parentView}).visitAttributes(attrs);
};Blaze._destroyView=function(view,_skipNodes){if(view.isDestroyed)return;view.isDestroyed=true;Blaze._fireCallbacks(view,"destroyed");if(view._domrange)view._domrange.destroyMembers(_skipNodes)};Blaze._destroyNode=function(node){if(node.nodeType===1)Blaze._DOMBackend.Teardown.tearDownElement(node)};Blaze._isContentEqual=function(a,b){if(a instanceof HTML.Raw){return b instanceof HTML.Raw&&a.value===b.value}else if(a==null){return b==null}else{return a===b&&(typeof a==="number"||typeof a==="boolean"||typeof a==="string")}};Blaze.currentView=null;Blaze._withCurrentView=function(view,func){var oldView=Blaze.currentView;try{Blaze.currentView=view;return func()}finally{Blaze.currentView=oldView}};var checkRenderContent=function(content){if(content===null)throw new Error("Can't render null");if(typeof content==="undefined")throw new Error("Can't render undefined");if(content instanceof Blaze.View||content instanceof Blaze.Template||typeof content==="function")return;try{(new HTML.Visitor).visit(content)}catch(e){throw new Error("Expected Template or View")}};var contentAsView=function(content){checkRenderContent(content);if(content instanceof Blaze.Template){return content.constructView()}else if(content instanceof Blaze.View){return content}else{var func=content;if(typeof func!=="function"){func=function(){return content}}return Blaze.View("render",func)}};var contentAsFunc=function(content){checkRenderContent(content);if(typeof content!=="function"){return function(){return content}}else{return content}};Blaze.render=function(content,parentElement,nextNode,parentView){if(!parentElement){Blaze._warn("Blaze.render without a parent element is deprecated. "+"You must specify where to insert the rendered content.")}if(nextNode instanceof Blaze.View){parentView=nextNode;nextNode=null}if(parentElement&&typeof parentElement.nodeType!=="number")throw new Error("'parentElement' must be a DOM node");if(nextNode&&typeof nextNode.nodeType!=="number")throw new Error("'nextNode' must be a DOM node");parentView=parentView||currentViewIfRendering();var view=contentAsView(content);Blaze._materializeView(view,parentView);if(parentElement){view._domrange.attach(parentElement,nextNode)}return view};Blaze.insert=function(view,parentElement,nextNode){Blaze._warn("Blaze.insert has been deprecated.  Specify where to insert the "+"rendered content in the call to Blaze.render.");if(!(view&&view._domrange instanceof Blaze._DOMRange))throw new Error("Expected template rendered with Blaze.render");view._domrange.attach(parentElement,nextNode)};Blaze.renderWithData=function(content,data,parentElement,nextNode,parentView){return Blaze.render(Blaze._TemplateWith(data,contentAsFunc(content)),parentElement,nextNode,parentView)};Blaze.remove=function(view){if(!(view&&view._domrange instanceof Blaze._DOMRange))throw new Error("Expected template rendered with Blaze.render");while(view){if(!view.isDestroyed){var range=view._domrange;if(range.attached&&!range.parentRange)range.detach();range.destroy()}view=view._hasGeneratedParent&&view.parentView}};Blaze.toHTML=function(content,parentView){parentView=parentView||currentViewIfRendering();return HTML.toHTML(Blaze._expandView(contentAsView(content),parentView))};Blaze.toHTMLWithData=function(content,data,parentView){parentView=parentView||currentViewIfRendering();return HTML.toHTML(Blaze._expandView(Blaze._TemplateWith(data,contentAsFunc(content)),parentView))};Blaze._toText=function(htmljs,parentView,textMode){if(typeof htmljs==="function")throw new Error("Blaze._toText doesn't take a function, just HTMLjs");if(parentView!=null&&!(parentView instanceof Blaze.View)){textMode=parentView;parentView=null}parentView=parentView||currentViewIfRendering();if(!textMode)throw new Error("textMode required");if(!(textMode===HTML.TEXTMODE.STRING||textMode===HTML.TEXTMODE.RCDATA||textMode===HTML.TEXTMODE.ATTRIBUTE))throw new Error("Unknown textMode: "+textMode);return HTML.toText(Blaze._expand(htmljs,parentView),textMode)};Blaze.getData=function(elementOrView){var theWith;if(!elementOrView){theWith=Blaze.getView("with")}else if(elementOrView instanceof Blaze.View){var view=elementOrView;theWith=view.name==="with"?view:Blaze.getView(view,"with")}else if(typeof elementOrView.nodeType==="number"){if(elementOrView.nodeType!==1)throw new Error("Expected DOM element");theWith=Blaze.getView(elementOrView,"with")}else{throw new Error("Expected DOM element or View")}return theWith?theWith.dataVar.get():null};Blaze.getElementData=function(element){Blaze._warn("Blaze.getElementData has been deprecated.  Use "+"Blaze.getData(element) instead.");if(element.nodeType!==1)throw new Error("Expected DOM element");return Blaze.getData(element)};Blaze.getView=function(elementOrView,_viewName){var viewName=_viewName;if(typeof elementOrView==="string"){viewName=elementOrView;elementOrView=null}if(!elementOrView){return Blaze._getCurrentView(viewName)}else if(elementOrView instanceof Blaze.View){return Blaze._getParentView(elementOrView,viewName)}else if(typeof elementOrView.nodeType==="number"){return Blaze._getElementView(elementOrView,viewName)}else{throw new Error("Expected DOM element or View")}};Blaze._getCurrentView=function(name){var view=Blaze.currentView;if(!view)throw new Error("There is no current view");if(name){while(view&&view.name!==name)view=view.parentView;return view||null}else{return view}};Blaze._getParentView=function(view,name){var v=view.parentView;if(name){while(v&&v.name!==name)v=v.parentView}return v||null};Blaze._getElementView=function(elem,name){var range=Blaze._DOMRange.forElement(elem);var view=null;while(range&&!view){view=range.view||null;if(!view){if(range.parentRange)range=range.parentRange;else range=Blaze._DOMRange.forElement(range.parentElement)}}if(name){while(view&&view.name!==name)view=view.parentView;return view||null}else{return view}};Blaze._addEventMap=function(view,eventMap,thisInHandler){thisInHandler=thisInHandler||null;var handles=[];if(!view._domrange)throw new Error("View must have a DOMRange");view._domrange.onAttached(function attached_eventMaps(range,element){_.each(eventMap,function(handler,spec){var clauses=spec.split(/,\s+/);_.each(clauses,function(clause){var parts=clause.split(/\s+/);if(parts.length===0)return;var newEvents=parts.shift();var selector=parts.join(" ");handles.push(Blaze._EventSupport.listen(element,newEvents,selector,function(evt){if(!range.containsElement(evt.currentTarget))return null;var handlerThis=thisInHandler||this;var handlerArgs=arguments;return Blaze._withCurrentView(view,function(){return handler.apply(handlerThis,handlerArgs)})},range,function(r){return r.parentRange}))})})});view.onViewDestroyed(function(){_.each(handles,function(h){h.stop()});handles.length=0})}}).call(this);(function(){Blaze._calculateCondition=function(cond){if(cond instanceof Array&&cond.length===0)cond=false;return!!cond};Blaze.With=function(data,contentFunc){var view=Blaze.View("with",contentFunc);view.dataVar=new ReactiveVar;view.onViewCreated(function(){if(typeof data==="function"){view.autorun(function(){view.dataVar.set(data())},view.parentView,"setData")}else{view.dataVar.set(data)}});return view};Blaze._attachBindingsToView=function(bindings,view){view.onViewCreated(function(){_.each(bindings,function(binding,name){view._scopeBindings[name]=new ReactiveVar;if(typeof binding==="function"){view.autorun(function(){view._scopeBindings[name].set(binding())},view.parentView)}else{view._scopeBindings[name].set(binding)}})})};Blaze.Let=function(bindings,contentFunc){var view=Blaze.View("let",contentFunc);Blaze._attachBindingsToView(bindings,view);return view};Blaze.If=function(conditionFunc,contentFunc,elseFunc,_not){var conditionVar=new ReactiveVar;var view=Blaze.View(_not?"unless":"if",function(){return conditionVar.get()?contentFunc():elseFunc?elseFunc():null});view.__conditionVar=conditionVar;view.onViewCreated(function(){this.autorun(function(){var cond=Blaze._calculateCondition(conditionFunc());conditionVar.set(_not?!cond:cond)},this.parentView,"condition")});return view};Blaze.Unless=function(conditionFunc,contentFunc,elseFunc){return Blaze.If(conditionFunc,contentFunc,elseFunc,true)};Blaze.Each=function(argFunc,contentFunc,elseFunc){var eachView=Blaze.View("each",function(){var subviews=this.initialSubviews;this.initialSubviews=null;if(this._isCreatedForExpansion){this.expandedValueDep=new Tracker.Dependency;this.expandedValueDep.depend()}return subviews});eachView.initialSubviews=[];eachView.numItems=0;eachView.inElseMode=false;eachView.stopHandle=null;eachView.contentFunc=contentFunc;eachView.elseFunc=elseFunc;eachView.argVar=new ReactiveVar;eachView.variableName=null;var updateIndices=function(from,to){if(to===undefined){to=eachView.numItems-1}for(var i=from;i<=to;i++){var view=eachView._domrange.members[i].view;view._scopeBindings["@index"].set(i)}};eachView.onViewCreated(function(){eachView.autorun(function(){var arg=argFunc();if(_.isObject(arg)&&_.has(arg,"_sequence")){eachView.variableName=arg._variable||null;arg=arg._sequence}eachView.argVar.set(arg)},eachView.parentView,"collection");eachView.stopHandle=ObserveSequence.observe(function(){return eachView.argVar.get()},{addedAt:function(id,item,index){Tracker.nonreactive(function(){var newItemView;if(eachView.variableName){newItemView=Blaze.View("item",eachView.contentFunc)}else{newItemView=Blaze.With(item,eachView.contentFunc)}eachView.numItems++;var bindings={};bindings["@index"]=index;if(eachView.variableName){bindings[eachView.variableName]=item}Blaze._attachBindingsToView(bindings,newItemView);if(eachView.expandedValueDep){eachView.expandedValueDep.changed()}else if(eachView._domrange){if(eachView.inElseMode){eachView._domrange.removeMember(0);eachView.inElseMode=false}var range=Blaze._materializeView(newItemView,eachView);eachView._domrange.addMember(range,index);updateIndices(index)}else{eachView.initialSubviews.splice(index,0,newItemView)}})},removedAt:function(id,item,index){Tracker.nonreactive(function(){eachView.numItems--;if(eachView.expandedValueDep){eachView.expandedValueDep.changed()}else if(eachView._domrange){eachView._domrange.removeMember(index);updateIndices(index);if(eachView.elseFunc&&eachView.numItems===0){eachView.inElseMode=true;eachView._domrange.addMember(Blaze._materializeView(Blaze.View("each_else",eachView.elseFunc),eachView),0)}}else{eachView.initialSubviews.splice(index,1)}})},changedAt:function(id,newItem,oldItem,index){Tracker.nonreactive(function(){if(eachView.expandedValueDep){eachView.expandedValueDep.changed()}else{var itemView;if(eachView._domrange){itemView=eachView._domrange.getMember(index).view}else{itemView=eachView.initialSubviews[index]}if(eachView.variableName){itemView._scopeBindings[eachView.variableName].set(newItem)}else{itemView.dataVar.set(newItem)}}})},movedTo:function(id,item,fromIndex,toIndex){Tracker.nonreactive(function(){if(eachView.expandedValueDep){eachView.expandedValueDep.changed()}else if(eachView._domrange){eachView._domrange.moveMember(fromIndex,toIndex);updateIndices(Math.min(fromIndex,toIndex),Math.max(fromIndex,toIndex))}else{var subviews=eachView.initialSubviews;var itemView=subviews[fromIndex];subviews.splice(fromIndex,1);subviews.splice(toIndex,0,itemView)}})}});if(eachView.elseFunc&&eachView.numItems===0){eachView.inElseMode=true;eachView.initialSubviews[0]=Blaze.View("each_else",eachView.elseFunc)}});eachView.onViewDestroyed(function(){if(eachView.stopHandle)eachView.stopHandle.stop()});return eachView};Blaze._TemplateWith=function(arg,contentFunc){var w;var argFunc=arg;if(typeof arg!=="function"){argFunc=function(){return arg}}var wrappedArgFunc=function(){var viewToEvaluateArg=null;if(w.parentView&&w.parentView.name==="InOuterTemplateScope"){viewToEvaluateArg=w.parentView.originalParentView}if(viewToEvaluateArg){return Blaze._withCurrentView(viewToEvaluateArg,argFunc)}else{return argFunc()}};var wrappedContentFunc=function(){var content=contentFunc.call(this);if(content instanceof Blaze.Template){content=content.constructView()}if(content instanceof Blaze.View){content._hasGeneratedParent=true}return content};w=Blaze.With(wrappedArgFunc,wrappedContentFunc);w.__isTemplateWith=true;return w};Blaze._InOuterTemplateScope=function(templateView,contentFunc){var view=Blaze.View("InOuterTemplateScope",contentFunc);var parentView=templateView.parentView;if(parentView.__isTemplateWith)parentView=parentView.parentView;view.onViewCreated(function(){this.originalParentView=this.parentView;this.parentView=parentView;this.__childDoesntStartNewLexicalScope=true});return view};Blaze.InOuterTemplateScope=Blaze._InOuterTemplateScope}).call(this);(function(){Blaze._globalHelpers={};Blaze.registerHelper=function(name,func){Blaze._globalHelpers[name]=func};var bindIfIsFunction=function(x,target){if(typeof x!=="function")return x;return _.bind(x,target)};var bindDataContext=function(x){if(typeof x==="function"){return function(){var data=Blaze.getData();if(data==null)data={};return x.apply(data,arguments)}}return x};Blaze._OLDSTYLE_HELPER={};Blaze._getTemplateHelper=function(template,name,tmplInstanceFunc){var isKnownOldStyleHelper=false;if(template.__helpers.has(name)){var helper=template.__helpers.get(name);if(helper===Blaze._OLDSTYLE_HELPER){isKnownOldStyleHelper=true}else if(helper!=null){return wrapHelper(bindDataContext(helper),tmplInstanceFunc)}else{return null}}if(name in template){if(!isKnownOldStyleHelper){template.__helpers.set(name,Blaze._OLDSTYLE_HELPER);if(!template._NOWARN_OLDSTYLE_HELPERS){Blaze._warn("Assigning helper with `"+template.viewName+"."+name+" = ...` is deprecated.  Use `"+template.viewName+".helpers(...)` instead.")}}if(template[name]!=null){return wrapHelper(bindDataContext(template[name]),tmplInstanceFunc)}}return null};var wrapHelper=function(f,templateFunc){if(typeof f!=="function"){return f}return function(){var self=this;var args=arguments;return Blaze.Template._withTemplateInstanceFunc(templateFunc,function(){return Blaze._wrapCatchingExceptions(f,"template helper").apply(self,args)})}};Blaze._lexicalBindingLookup=function(view,name){var currentView=view;var blockHelpersStack=[];do{if(_.has(currentView._scopeBindings,name)){var bindingReactiveVar=currentView._scopeBindings[name];return function(){return bindingReactiveVar.get()}}}while(!(currentView.__startsNewLexicalScope&&!(currentView.parentView&&currentView.parentView.__childDoesntStartNewLexicalScope))&&(currentView=currentView.parentView));return null};Blaze._getTemplate=function(name,templateInstance){if(name in Blaze.Template&&Blaze.Template[name]instanceof Blaze.Template){return Blaze.Template[name]}return null};Blaze._getGlobalHelper=function(name,templateInstance){if(Blaze._globalHelpers[name]!=null){return wrapHelper(bindDataContext(Blaze._globalHelpers[name]),templateInstance)}return null};Blaze.View.prototype.lookup=function(name,_options){var template=this.template;var lookupTemplate=_options&&_options.template;var helper;var binding;var boundTmplInstance;var foundTemplate;if(this.templateInstance){boundTmplInstance=_.bind(this.templateInstance,this)}if(/^\./.test(name)){if(!/^(\.)+$/.test(name))throw new Error("id starting with dot must be a series of dots");return Blaze._parentData(name.length-1,true)}if(template&&(helper=Blaze._getTemplateHelper(template,name,boundTmplInstance))!=null){return helper}if(template&&(binding=Blaze._lexicalBindingLookup(Blaze.currentView,name))!=null){return binding}if(lookupTemplate&&(foundTemplate=Blaze._getTemplate(name,boundTmplInstance))!=null){return foundTemplate}if((helper=Blaze._getGlobalHelper(name,boundTmplInstance))!=null){return helper}return function(){var isCalledAsFunction=arguments.length>0;var data=Blaze.getData();var x=data&&data[name];if(!x){if(lookupTemplate){throw new Error("No such template: "+name)}else if(isCalledAsFunction){throw new Error("No such function: "+name)}else if(name.charAt(0)==="@"&&(x===null||x===undefined)){throw new Error("Unsupported directive: "+name)}}if(!data){return null}if(typeof x!=="function"){if(isCalledAsFunction){throw new Error("Can't call non-function: "+x)}return x}return x.apply(data,arguments)}};Blaze._parentData=function(height,_functionWrapped){if(height==null){height=1}var theWith=Blaze.getView("with");for(var i=0;i<height&&theWith;i++){theWith=Blaze.getView(theWith,"with")}if(!theWith)return null;if(_functionWrapped)return function(){return theWith.dataVar.get()};return theWith.dataVar.get()};Blaze.View.prototype.lookupTemplate=function(name){return this.lookup(name,{template:true})}}).call(this);(function(){Blaze.Template=function(viewName,renderFunction){if(!(this instanceof Blaze.Template))return new Blaze.Template(viewName,renderFunction);if(typeof viewName==="function"){renderFunction=viewName;viewName=""}if(typeof viewName!=="string")throw new Error("viewName must be a String (or omitted)");if(typeof renderFunction!=="function")throw new Error("renderFunction must be a function");this.viewName=viewName;this.renderFunction=renderFunction;this.__helpers=new HelperMap;this.__eventMaps=[];this._callbacks={created:[],rendered:[],destroyed:[]}};var Template=Blaze.Template;var HelperMap=function(){};HelperMap.prototype.get=function(name){return this[" "+name]};HelperMap.prototype.set=function(name,helper){this[" "+name]=helper};HelperMap.prototype.has=function(name){return" "+name in this};Blaze.isTemplate=function(t){return t instanceof Blaze.Template};Template.prototype.onCreated=function(cb){this._callbacks.created.push(cb)};Template.prototype.onRendered=function(cb){this._callbacks.rendered.push(cb)};Template.prototype.onDestroyed=function(cb){this._callbacks.destroyed.push(cb)};Template.prototype._getCallbacks=function(which){var self=this;var callbacks=self[which]?[self[which]]:[];callbacks=callbacks.concat(self._callbacks[which]);return callbacks};var fireCallbacks=function(callbacks,template){Template._withTemplateInstanceFunc(function(){return template},function(){for(var i=0,N=callbacks.length;i<N;i++){callbacks[i].call(template)}})};Template.prototype.constructView=function(contentFunc,elseFunc){var self=this;var view=Blaze.View(self.viewName,self.renderFunction);view.template=self;view.templateContentBlock=contentFunc?new Template("(contentBlock)",contentFunc):null;view.templateElseBlock=elseFunc?new Template("(elseBlock)",elseFunc):null;if(self.__eventMaps||typeof self.events==="object"){view._onViewRendered(function(){if(view.renderCount!==1)return;if(!self.__eventMaps.length&&typeof self.events==="object"){Template.prototype.events.call(self,self.events)}_.each(self.__eventMaps,function(m){Blaze._addEventMap(view,m,view)})})}view._templateInstance=new Blaze.TemplateInstance(view);view.templateInstance=function(){var inst=view._templateInstance;inst.data=Blaze.getData(view);if(view._domrange&&!view.isDestroyed){inst.firstNode=view._domrange.firstNode();inst.lastNode=view._domrange.lastNode()}else{inst.firstNode=null;inst.lastNode=null}return inst};var createdCallbacks=self._getCallbacks("created");view.onViewCreated(function(){fireCallbacks(createdCallbacks,view.templateInstance())});var renderedCallbacks=self._getCallbacks("rendered");view.onViewReady(function(){fireCallbacks(renderedCallbacks,view.templateInstance())});var destroyedCallbacks=self._getCallbacks("destroyed");view.onViewDestroyed(function(){fireCallbacks(destroyedCallbacks,view.templateInstance())});return view};Blaze.TemplateInstance=function(view){if(!(this instanceof Blaze.TemplateInstance))return new Blaze.TemplateInstance(view);if(!(view instanceof Blaze.View))throw new Error("View required");view._templateInstance=this;this.view=view;this.data=null;this.firstNode=null;this.lastNode=null;this._allSubsReadyDep=new Tracker.Dependency;this._allSubsReady=false;this._subscriptionHandles={}};Blaze.TemplateInstance.prototype.$=function(selector){var view=this.view;if(!view._domrange)throw new Error("Can't use $ on template instance with no DOM");return view._domrange.$(selector)};Blaze.TemplateInstance.prototype.findAll=function(selector){return Array.prototype.slice.call(this.$(selector))};Blaze.TemplateInstance.prototype.find=function(selector){var result=this.$(selector);return result[0]||null};Blaze.TemplateInstance.prototype.autorun=function(f){return this.view.autorun(f)};Blaze.TemplateInstance.prototype.subscribe=function(){var self=this;var subHandles=self._subscriptionHandles;var args=_.toArray(arguments);var options={};if(args.length){var lastParam=_.last(args);var lastParamOptionsPattern={onReady:Match.Optional(Function),onError:Match.Optional(Function),onStop:Match.Optional(Function),connection:Match.Optional(Match.Any)};if(_.isFunction(lastParam)){options.onReady=args.pop()}else if(lastParam&&Match.test(lastParam,lastParamOptionsPattern)){options=args.pop()}}var subHandle;var oldStopped=options.onStop;options.onStop=function(error){delete subHandles[subHandle.subscriptionId];if(!self._allSubsReady){self._allSubsReadyDep.changed()}if(oldStopped){oldStopped(error)}};var connection=options.connection;var callbacks=_.pick(options,["onReady","onError","onStop"]);args.push(callbacks);subHandle=self.view.subscribe.call(self.view,args,{connection:connection});if(!_.has(subHandles,subHandle.subscriptionId)){subHandles[subHandle.subscriptionId]=subHandle;if(self._allSubsReady){self._allSubsReadyDep.changed()}}return subHandle};Blaze.TemplateInstance.prototype.subscriptionsReady=function(){this._allSubsReadyDep.depend();this._allSubsReady=_.all(this._subscriptionHandles,function(handle){return handle.ready()});return this._allSubsReady};Template.prototype.helpers=function(dict){for(var k in dict)this.__helpers.set(k,dict[k])};Template._currentTemplateInstanceFunc=null;Template._withTemplateInstanceFunc=function(templateInstanceFunc,func){if(typeof func!=="function")throw new Error("Expected function, got: "+func);var oldTmplInstanceFunc=Template._currentTemplateInstanceFunc;try{Template._currentTemplateInstanceFunc=templateInstanceFunc;return func()}finally{Template._currentTemplateInstanceFunc=oldTmplInstanceFunc}};Template.prototype.events=function(eventMap){var template=this;var eventMap2={};for(var k in eventMap){eventMap2[k]=function(k,v){return function(event){var view=this;var data=Blaze.getData(event.currentTarget);if(data==null)data={};var args=Array.prototype.slice.call(arguments);var tmplInstanceFunc=_.bind(view.templateInstance,view);args.splice(1,0,tmplInstanceFunc());return Template._withTemplateInstanceFunc(tmplInstanceFunc,function(){return v.apply(data,args)})}}(k,eventMap[k])}template.__eventMaps.push(eventMap2)};Template.instance=function(){return Template._currentTemplateInstanceFunc&&Template._currentTemplateInstanceFunc()};Template.currentData=Blaze.getData;Template.parentData=Blaze._parentData;Template.registerHelper=Blaze.registerHelper}).call(this);(function(){UI=Blaze;Blaze.ReactiveVar=ReactiveVar;UI._templateInstance=Blaze.Template.instance;Handlebars={};Handlebars.registerHelper=Blaze.registerHelper;Handlebars._escape=Blaze._escape;Handlebars.SafeString=function(string){this.string=string};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()}}).call(this)}).call(this);if(typeof Package==="undefined")Package={};Package.blaze={Blaze:Blaze,UI:UI,Handlebars:Handlebars}})();(function(){var Meteor=Package.meteor.Meteor;var _=Package.underscore._;var Blaze=Package.blaze.Blaze;var UI=Package.blaze.UI;var Handlebars=Package.blaze.Handlebars;var Spacebars=Package.spacebars.Spacebars;var HTML=Package.htmljs.HTML;var Template;(function(){Template=Blaze.Template;var RESERVED_TEMPLATE_NAMES="__proto__ name".split(" ");Template.__checkName=function(name){if(name in Template||_.contains(RESERVED_TEMPLATE_NAMES,name)){if(Template[name]instanceof Template&&name!=="body")throw new Error("There are multiple templates named '"+name+"'. Each template needs a unique name.");throw new Error("This template name is reserved: "+name)}};Template.__define__=function(name,renderFunc){Template.__checkName(name);Template[name]=new Template("Template."+name,renderFunc);Template[name]._NOWARN_OLDSTYLE_HELPERS=true};Template.body=new Template("body",function(){var view=this;return _.map(Template.body.contentRenderFuncs,function(func){return func.apply(view)})});Template.body.contentRenderFuncs=[];Template.body.view=null;Template.body.addContent=function(renderFunc){Template.body.contentRenderFuncs.push(renderFunc)};Template.body.renderToDocument=function(){if(Template.body.view)return;var view=Blaze.render(Template.body,document.body);Template.body.view=view};UI.body=Template.body;Template.__body__=Template.body;Template.__body__.__contentParts=Template.body.contentViews;Template.__body__.__instantiate=Template.body.renderToDocument}).call(this);(function(){Template.__checkName("__dynamic");Template["__dynamic"]=new Template("Template.__dynamic",function(){var view=this;return[Blaze.View("lookup:checkContext",function(){return Spacebars.mustache(view.lookup("checkContext"))}),"\n  ",Blaze.If(function(){return Spacebars.call(view.lookup("dataContextPresent"))},function(){return["\n    ",Spacebars.include(view.lookupTemplate("__dynamicWithDataContext"),function(){return Blaze._InOuterTemplateScope(view,function(){return Spacebars.include(function(){return Spacebars.call(view.templateContentBlock)})})}),"\n  "]},function(){return["\n    \n    ",Blaze._TemplateWith(function(){return{template:Spacebars.call(view.lookup("template")),data:Spacebars.call(view.lookup(".."))}},function(){return Spacebars.include(view.lookupTemplate("__dynamicWithDataContext"),function(){return Blaze._InOuterTemplateScope(view,function(){return Spacebars.include(function(){return Spacebars.call(view.templateContentBlock)})})})}),"\n  "]})]});Template.__checkName("__dynamicWithDataContext");Template["__dynamicWithDataContext"]=new Template("Template.__dynamicWithDataContext",function(){var view=this;return Spacebars.With(function(){return Spacebars.dataMustache(view.lookup("chooseTemplate"),view.lookup("template"))},function(){return["\n    \n    ",Blaze._TemplateWith(function(){return Spacebars.call(Spacebars.dot(view.lookup(".."),"data"))},function(){return Spacebars.include(view.lookupTemplate(".."),function(){return Blaze._InOuterTemplateScope(view,function(){return Spacebars.include(function(){return Spacebars.call(view.templateContentBlock)})})})}),"\n  "]})})}).call(this);(function(){var Template=Blaze.Template;Template.__dynamicWithDataContext.helpers({chooseTemplate:function(name){return Blaze._getTemplate(name,function(){return Template.instance()})}});Template.__dynamic.helpers({dataContextPresent:function(){return _.has(this,"data")},checkContext:function(){if(!_.has(this,"template")){throw new Error("Must specify name in the 'template' argument "+"to {{> Template.dynamic}}.")}_.each(this,function(v,k){if(k!=="template"&&k!=="data"){throw new Error("Invalid argument to {{> Template.dynamic}}: "+k)}})}})}).call(this);if(typeof Package==="undefined")Package={};Package.templating={Template:Template}})();(function(){var Meteor=Package.meteor.Meteor;var Template=Package.templating.Template;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var ReactiveVar=Package["reactive-var"].ReactiveVar;var Blaze=Package.blaze.Blaze;var UI=Package.blaze.UI;var Handlebars=Package.blaze.Handlebars;var Spacebars=Package.spacebars.Spacebars;var HTML=Package.htmljs.HTML;var meteorStatusI18n;(function(){(function(){Template.__checkName("meteorStatus");Template["meteorStatus"]=new Template("Template.meteorStatus",function(){var view=this;return Blaze.If(function(){return Spacebars.call(view.lookup("show"))},function(){return["\n        ",Blaze.If(function(){return Spacebars.call(view.lookup("isStyled"))},function(){return["\n            ",HTML.DIV({"class":function(){return["meteor-status ",Spacebars.mustache(view.lookup("position"))]}},Blaze.View("lookup:langDisconnected",function(){return Spacebars.mustache(view.lookup("langDisconnected"))}),Blaze.If(function(){return Spacebars.call(view.lookup("showLink"))},function(){return[" ",HTML.A({href:"#","class":"meteor-status-retry"},Blaze.View("lookup:langRetryLink",function(){return Spacebars.mustache(view.lookup("langRetryLink"))}))]})),"\n        "]},function(){return["\n            ",Blaze.View("lookup:langDisconnected",function(){return Spacebars.mustache(view.lookup("langDisconnected"))}),Blaze.If(function(){return Spacebars.call(view.lookup("showLink"))},function(){return[" ",HTML.A({href:"#","class":"meteor-status-retry"},Blaze.View("lookup:langRetryLink",function(){return Spacebars.mustache(view.lookup("langRetryLink"))}))]}),"\n        "]}),"\n    "]})})}).call(this);(function(){Template.meteorStatus.onCreated(function(){var instance=this;instance.updateCountdownTimeout;instance.nextRetry=new ReactiveVar(0);instance.options={style:true,lang:"en",position:"bottom",showLink:true,msgText:"",linkText:""};instance.firstConnection=new ReactiveVar(true);if(Template.currentData()){for(var property in instance.options){if(Template.currentData()[property]!==undefined){instance.options[property]=Template.currentData()[property]}}}Tracker.autorun(function(){if(Meteor.status().status==="waiting"){instance.updateCountdownTimeout=Meteor.setInterval(function(){instance.nextRetry.set(Math.round((Meteor.status().retryTime-(new Date).getTime())/1e3))},1e3)}else{instance.nextRetry.set(0);Meteor.clearInterval(instance.updateCountdownTimeout)}});Tracker.autorun(function(computation){if(Meteor.status().connected&&Meteor.status().status==="connected"){instance.firstConnection.set(false);computation.stop()}})});Template.meteorStatus.helpers({langDisconnected:function(){if(Template.instance().options.msgText){return Template.instance().options.msgText.replace("%delay%",Template.instance().nextRetry.get())}else{return meteorStatusI18n[Template.instance().options.lang].disconnected.replace("%delay%",Template.instance().nextRetry.get())}},langRetryLink:function(){if(Template.instance().options.linkText){return Template.instance().options.linkText}else{return meteorStatusI18n[Template.instance().options.lang].retry}},isStyled:function(){return Template.instance().options.style},showLink:function(){return Template.instance().options.showLink},position:function(){if(Template.instance().options.position==="top"){return"meteor-status-top"}return"meteor-status-bottom"},show:function(){if(!Template.instance().firstConnection.get()&&!Meteor.status().connected&&Meteor.status().status!=="offline"&&Meteor.status().retryCount>1){return true}return false}});Template.meteorStatus.events({"click a.meteor-status-retry":function(){if(Meteor.status().status!=="connecting"){Meteor.reconnect()}return false}})}).call(this);(function(){meteorStatusI18n={en:{disconnected:"Disconnected from server, trying to reconnect in %delay%s.",retry:"Retry now"},es:{disconnected:"Desconectado del servidor, reconectando en %delay% segundos.",retry:"Reintentar ahora"},fr:{disconnected:"Dconnect du serveur, prochaine tentative de reconnexion dans %delay%s.",retry:"Ressayer"},zh:{disconnected:"%delay%",retry:""},ar:{disconnected:"      %delay%.",retry:" "}}}).call(this)}).call(this);if(typeof Package==="undefined")Package={};Package["255kb:meteor-status"]={}})();